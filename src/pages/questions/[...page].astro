---
import Html from "../../layouts/html.astro";
import Main from "../../layouts/main.astro";

import Nav from "../../components/nav.astro";
import RevealButton from "../../components/RevealButton.astro";
import { Debug } from "astro/components";
import QuestionCard from "../../components/QuestionCard.astro";
import Pagination from "../../components/Pagination.astro";
import CardsList from "../../components/CardsList.astro";

export async function getStaticPaths({ paginate }) {
    // Load your data with fetch(), Astro.glob(), etc.
    const response = await fetch(`${import.meta.env.BACKEND_URL}/question`);
    const result = await response.json();
    // const allPokemon = result.results;

    // Return a paginated collection of paths for all posts
    return paginate(result, { pageSize: 10 });

    // return [
    //     { params: { id: "aaaaa" } },
    //     { params: { id: "2" } },
    //     { params: { id: "3" } },
    // ];
}

const { page } = Astro.props;
---

<Html
    title="Questions de culture générale, les questions du jeu des milles euros"
    description="Questions multi-thématique de culture générale pour vous mettre au défi"
>
    <Main>
        <CardsList>
            {
                page.data.map(
                    (
                        item
                        // <Debug data={item} />
                    ) => (
                        <QuestionCard
                            level={item.level}
                            question={item.question}
                            answer={item.answer}
                            theme={item.theme}
                            id={item._id}
                        />
                    )
                )
            }
        </CardsList>

        <!-- <Debug data={page} /> -->
        <Pagination data={page} />
    </Main>
</Html>
